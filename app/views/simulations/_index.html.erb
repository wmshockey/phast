<h2>Simulations</h2>
<table>
  <thead>
   <tr>
      <th>Name</th>
	  <th>Description</th>
      <th>Pipeline</th>
	  <th>Nomination</th>
	  <th>Prior Schedule</th>
	  <th>Max Flowrate</th>
	  <th>Max Batchsize</th>
    </tr>
  </thead>

  <tbody>
	<% @simulations.order(name: :asc).each do |simulation| %>
      <tr>
		<% pipeline = current_user.pipelines.find {|p| p.id == simulation.pipeline_id} %>
		<% nomination = current_user.nominations.find {|n| n.id == simulation.nomination_id} %>
		<% schedule = current_user.schedules.find {|s| s.id == simulation.schedule_id} %>
        <td><%= link_to simulation.name, simulation_path(simulation) %></td>
		<td><%= simulation.description %></td>
		<% if pipeline then %>
        	<td><%= link_to pipeline.name, pipeline %></td>
		<% else %>
			<td><%= "Pipeline missing" %></td>
		<% end %>
		<% if nomination then %>
        	<td><%= link_to nomination.name, nomination %></td>
		<% else %>
			<td><%= "Nomination missing " %></td>
		<% end %>
		<% if schedule then %>
        	<td><%= link_to schedule.name, schedule %></td>
		<% else %>
			<td><%= "Schedule missing" %></td>
		<% end %>
        <td><%= simulation.max_flowrate %></td>
        <td><%= simulation.max_batchsize %></td>
      </tr>
	<% end %>
	<td colspan="7"><%= link_to 'Add Simulation', new_simulation_path %></td>
  </tbody>
</table>

